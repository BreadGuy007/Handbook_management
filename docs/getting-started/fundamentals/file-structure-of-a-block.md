<!-- 
# File structure of a block
 -->
# ブロックのファイル構成

<!-- 
It is recommended to **register blocks within plugins** to ensure they stay available when a theme gets switched. With the [`create-block` tool](https://developer.wordpress.org/block-editor/getting-started/devenv/get-started-with-create-block/) you can quickly scaffold the structure of the files required to create a plugin that registers a block. 
 -->
テーマを変更しても引き続きブロックを利用できるように、**プラグインによるブロックの登録** を推奨します。[`create-block` ツール](https://ja.wordpress.org/team/handbook/block-editor/getting-started/devenv/get-started-with-create-block/)を使用すると、ブロック登録用のプラグイン作成に必要な、ファイルセットのひな形を素早く作成できます。

<!-- 
The files generated by `create-block` are a good reference of the files that can be involved in the definition and registration of a block.
 -->
`create-block` が生成するファイルセットは、ブロックの定義や登録に関連するファイルセットの良いリファレンスになります。

<!-- 
[![Open File Structure of a Block Diagram in excalidraw](https://developer.wordpress.org/files/2023/11/file-structure-block.png)](https://excalidraw.com/#json=YYpeR-kY1ZMhFKVZxGhMi,mVZewfwNAh_oL-7bj4gmdw "Open File Structure of a Block Diagram in excalidraw")
 -->
[![ブロックのファイル構成の図解を excalidraw で開く](https://developer.wordpress.org/files/2023/11/file-structure-block.png)](https://excalidraw.com/#json=YYpeR-kY1ZMhFKVZxGhMi,mVZewfwNAh_oL-7bj4gmdw "ブロックのファイル構成の図解を excalidraw で開く")

### `<plugin-file>.php`

<!-- 
A block is usually added to the block editor using a WordPress plugin. In the main PHP file of the plugin the block is usually registered on the server side.
 -->
ブロックは通常 WordPress プラグインを使用してブロックエディターに追加されます。プラグインのメインの PHP ファイルでは、通常サーバー側でブロックが登録されます。

<!-- 
<div class="callout callout-info">
For more on creating a WordPress plugin see <a href="https://developer.wordpress.org/plugins/plugin-basics/">Plugin Basics</a>, and <a href="https://developer.wordpress.org/plugins/plugin-basics/header-requirements/">Plugin Header requirements</a> for explanation and additional fields you can include in your plugin header.
</div>
 -->
> WordPress プラグインの作成の詳細については <a href="https://developer.wordpress.org/plugins/plugin-basics/">Plugin Basics</a>、プラグインヘッダーの説明と、ヘッダーに挿入可能な追加フィールドについては <a href="https://developer.wordpress.org/plugins/plugin-basics/header-requirements/">Plugin Header requirements</a> を参照してください。

### `package.json`

<!-- 
[`package.json`](https://docs.npmjs.com/cli/v10/configuring-npm/package-json) is a configuration file for a Node.js project. In this file you define the NPM dependencies of the block and the scripts used for local work.
 -->
[`package.json`](https://docs.npmjs.com/cli/v10/configuring-npm/package-json) は Node.js プロジェクトの構成ファイルです。このファイルにはブロックの NPM 依存と、ローカルでの作業に使用するスクリプトを定義します。

<!-- 
### `src` folder
 -->
### `src` フォルダ

<!-- 
In a standard project you'll place your block files in the `src` folder. By default, [the build process with `wp-scripts`](https://developer.wordpress.org/block-editor/getting-started/fundamentals/javascript-in-the-block-editor/#javascript-build-process) will take files from this folder and will generate the bundled files in the `build` folder. 
 -->
標準的なプロジェクトでは、ブロックファイルを `src` フォルダに配置します。デフォルトの [`wp-scripts` によるビルドプロセス](https://ja.wordpress.org/team/handbook/block-editor/getting-started/fundamentals/javascript-in-the-block-editor/#javascript-build-process) ではこのフォルダからファイルを取得し、`build` フォルダ内にバンドルされたファイルを生成します。

### `block.json`

<!-- 
This file contains the [metadata of the block](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/), and it's used to simplify the definition and registration of the block both in the client and on the server. 
 -->
このファイルには[ブロックのメタデータ](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/)が含まれています。クライアントとサーバーの両方で使用され、ブロックの定義と登録を簡素化します。

<!-- 
Among other data it provides properties to define the paths of the files involved in the block's behaviour, output and style. If there's a build process involved, this `block.json` along with the generated files are placed into a destination folder (usually the `build` folder) so the paths provided target to the bundled versions of these files.
 -->
他のデータとしてはブロックの動作、出力、スタイルに関係するファイルのパスを定義するプロパティを提供します。ビルドプロセスがある場合、この `block.json` は、生成されたファイルと一緒に保存先フォルダ (通常は `build` フォルダ) に配置されます。したがって指定するパスも、これらのファイルのバンドルされたバージョンを対象とします。

<!-- 
The most relevant properties that can be defined in a `block.json` to set the files involved in the block's behaviour, output or style are:
 -->
`block.json` で定義可能な、ブロックの動作や出力、スタイル関連のファイル設定と最も関連性の高いプロパティを以下に挙げます。

<!-- 
- The [`editorScript`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#editor-script) property, usually set with the path of a bundled `index.js` file (output build from `src/index.js`).
- The [`style`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#style) property, usually set with the path of a bundled `style-index.css` file (output build from `src/style.(css|scss|sass)`).
- The [`editorStyle`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#editor-style) property, usually set with the path of a bundled `index.css` (output build from `src/editor.(css|scss|sass)`).
- The [`render`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#render) property, usually set with the path of a bundled `render.php` (output copied from `src/render.php`).
- The [`viewScript`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script) property, usually set with the path of a bundled `view.js` (output copied from `src/view.php`).
 -->
- [`editorScript`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Editor-Script) プロパティ。通常、バンドルされた `index.js` ファイル (ビルドで `src/index.js` から出力される) のパスを設定します。
- [`style`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Style) プロパティ。通常、バンドルされた `style-index.css` ファイル (ビルドで `src/style.(css|scss|sass)` から出力される) のパスを設定します 。
- [`editorStyle`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Editor-Style) プロパティ。通常、バンドルされた `index.css` ファイル (ビルドで `src/editor.(css|scss|sass)` から出力される) のパスを設定します。
- [`render`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Render) プロパティ。通常、バンドルされた `render.php` ファイル (`src/render.php` からコピーして出力される) のパスを設定します。
- [`viewScript`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#View-Script) プロパティ。通常、バンドルされた `view.js` ファイル (ビルドで `src/view.js` から出力される) のパスを設定します。

<!-- 
[![Open Build Output Diagram in excalidraw](https://developer.wordpress.org/files/2023/11/file-structure-build-output.png)](https://excalidraw.com/#json=c22LROgcG4JkD-7SkuE-N,rQW_ViJBq0Yk3qhCgqD6zQ "Open Build Output Diagram in excalidraw")
 -->
[![ビルド出力の図解を excalidraw で開く](https://developer.wordpress.org/files/2023/11/file-structure-build-output.png)](https://excalidraw.com/#json=c22LROgcG4JkD-7SkuE-N,rQW_ViJBq0Yk3qhCgqD6zQ "ビルド出力の図解を excalidraw で開く")

### `index.js`

<!-- 
The `index.js` file (or any other file defined in the `editorScript` property of `block.json`) is the entry point file for javascript that should only get loaded in the editor. It is responsible for calling the `registerBlockType` function to register the block on the client. In a standard structure it imports the `edit.js` and `save.js` files to get functions required in block registration.
 -->
`index.js` ファイル (または `block.json` の `editorScript` プロパティで定義されたファイル) は、エディタでのみロードされる JavaScript のエントリーポイントファイルです。このファイルは `registerBlockType` 関数を呼び出し、クライアント側でブロックを登録します。標準的な構成では `edit.js` と `save.js` ファイルをインポートして、ブロックの登録に必要な関数を取得します。

### `edit.js`

<!-- 
The `edit.js` commonly gets used to contain the React component that gets used in the editor for our block. It usually exports a single component that then gets passed to the [`edit` property of the `registerBlockType`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#edit) function in the `index.js` file.
 -->
`edit.js` は一般に、ブロックのためにエディターで使用される React コンポーネントの格納に使用されます。通常、単一のコンポーネントをエクスポートし、`index.js` ファイル内の [`registerBlockType` 関数の `edit` プロパティ](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-edit-save/#edit)に渡されます。

### `save.js`

<!-- 
The `save.js` exports the function that returns the static HTML markup that gets saved to the Database and that is passed to the [`save` property of the `registerBlockType`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#save) function in the `index.js` file.
 -->
`save.js` は、データベースに保存される静的な HTML マークアップを返す関数をエクスポートします。`index.js` ファイル内の [`registerBlockType` 関数の `save` プロパティ](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-edit-save/#save)に渡されます。

### `style.(css|scss|sass)`

<!-- 
A `style` file with any of the extensions `.css`, `.scss` or `.sass`, contains the styles of the block that will be loaded in both the editor and the frontend. In the build process this file is converted into `style-index.css` which is usually defined at [`style`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#style) property in `block.json`
 -->
`.css`、`.scss`、`.sass` のいずれかの拡張子を持つ `style` ファイル。エディターとフロントエンドの両方で読み込まれるブロックのスタイルが含まれます。このファイルはビルドプロセスで `style-index.css` に変換され、通常は `block.json` の [`style`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Style) プロパティで定義されます。

<!-- 
<div class="callout callout-info">
    The webpack config used internally by <code>wp-scripts</code> includes a <a href="https://webpack.js.org/loaders/css-loader/">css-loader</a> chained with <a herf="https://webpack.js.org/loaders/postcss-loader/">postcss-loader</a> and <a href="https://webpack.js.org/loaders/sass-loader/">sass-loader</a> that allows it to process CSS, SASS or SCSS files. Check <a href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#default-webpack-config">Default webpack config</a> for more info
</div>
 -->
> `wp-scripts` が内部的に使用する webpack の構成では、<a href="https://webpack.js.org/loaders/css-loader/">css-loader</a> と <a herf="https://webpack.js.org/loaders/postcss-loader/">postcss-loader</a> や <a href="https://webpack.js.org/loaders/sass-loader/">sass-loader</a> が連結されていて、CSS、SASS、SCSS ファイルを処理できます。詳細については <a href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#default-webpack-config">デフォルトの webpack 構成</a> を参照してください。

### `editor.(css|scss|sass)`

<!-- 
An `editor` file with any of the extensions `.css`, `.scss` or `.sass`, contains the additional styles applied to the block only in the editor’s context. In the build process this file is converted into `index.css` which is usually defined at [`editorStyle`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#editor-style) property in `block.json`
 -->
`.css`、`.scss`、`.sass` のいずれかの拡張子を持つ `editor` ファイル。エディターのコンテキストでのみブロックに適用される追加スタイルが含まれます。このファイルはビルド処理で `index.css` に変換され、通常は `block.json` の [`editorStyle`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Editor-Style) プロパティで定義されます。

### `render.php`

<!-- 
The `render.php` file (or any other file defined in the [`render`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#render) property of `block.json`) defines the server side process that returns the markup for the block when there is a request from the frontend. If this file is defined, it will take precedence over any other ways to render the block's markup for the frontend.
 -->
`render.php` ファイル (または `block.json` の [`render`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#Render) プロパティで定義されたファイル) は、フロントエンドからのリクエストがあったときにブロックのマークアップを返すサーバー側の処理を定義します。このファイルが定義されていると、フロントエンドでブロックのマークアップをレンダーするする他の方法に優先されます。

### `view.js`

<!-- 
The `view.js` file (or any other file defined in the [`viewScript`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script) property of `block.json`) will be loaded in the front-end when the block is displayed.
 -->
`view.js` ファイル (または `block.json` の [`viewScript`](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/#View-Script) プロパティで定義されたファイル) は、ブロックが表示されたときにフロントエンドで読み込まれます。

<!-- 
### `build` folder
 -->
### `build` フォルダ

<!-- 
In a standard project, the `build` folder contains the generated files in [the build process triggered by the `build` or `start` commands of `wp-scripts`](https://developer.wordpress.org/block-editor/getting-started/devenv/get-started-with-wp-scripts/#the-build-process-with-wp-scripts). 
 -->
標準的なプロジェクトでは [`wp-scripts` の `build` コマンドまたは `start` コマンドによって起動されたビルドプロセス](https://ja.wordpress.org/team/handbook/block-editor/getting-started/devenv/get-started-with-wp-scripts/#wp-scripts-%E3%81%A7%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9) で生成されたファイルが、`build` フォルダに格納されます。

<!-- 
<div class="callout callout-tip">
    You can use <code>webpack-src-dir</code> and <code>output-path</code> option of <code>wp-scripts</code> build commands to <a href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#automatic-block-json-detection-and-the-source-code-directory">customize the entry and output points</a>
</div>
 -->
> `wp-scripts` のビルドコマンドの `webpack-src-dir` と `output-path` オプションを使用して、<a href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#automatic-block-json-detection-and-the-source-code-directory"> エントリと出力の場所をカスタマイズできます</a>。

<!-- 
## Additional resources
 -->
## 追加のリソース

<!-- 
- [Metadata in block.json](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/)
- [`wp-scripts build`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#build)
- [`wp-scripts start`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#start)
- [How webpack and WordPress packages interact](https://developer.wordpress.org/news/2023/04/how-webpack-and-wordpress-packages-interact/) | Developer Blog
 -->
- [block.json のメタデータ](https://ja.wordpress.org/team/handbook/block-editor/reference-guides/block-api/block-metadata/)
- [`wp-scripts build`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#build)
- [`wp-scripts start`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/#start)
- [How webpack and WordPress packages interact](https://developer.wordpress.org/news/2023/04/how-webpack-and-wordpress-packages-interact/) (webpack と WordPress パッケージの関係) | Developer Blog

[原文](https://github.com/WordPress/gutenberg/blob/trunk/docs/getting-started/fundamentals/file-structure-of-a-block.md)